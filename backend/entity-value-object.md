# Entity & Value Object

## Entity(엔티티)

데이터베이스에 사람이라는 객체가 있을 때 이름, 이메일, 비밀번호 등 많은 속성을 지닐 수 있습니다.\
데이터베이스에서는 이 사람을 id 로 식별합니다.\
그리고 사람이 자신의 이름, 이메일, 비밀번호를 바꾸더라도 id 가 바뀌지 않으면 같은 사람임을 의미합니다.
이처럼 속성이 바뀌더라도 여전히 같은 것으로 인식되는 객체를 엔티티라고 합니다.

## Value Object(값 객체)

어떤 사람의 현재 위치를 데이터베이스에 저장하는 예시를 들겠습니다.\
위치 객체는 생성되면 위도와 경도 값을 가집니다.\
위치 객체가 어떤 위치 정보를 담고 있는지에만 관심이 있기 때문에 위치 객체는 값 객체가 됩니다.

즉, 어떤 객체가 id 로 식별된다면 엔티티로, 그렇지 않다면 값 객체라고 구분할 수 있습니다.

## 하지만

무슨 뉘앙스인지 느낌은 알았지만 위의 설명으로는 데이터베이스를 구성 해보기에는 부족했습니다.\
그래서 더 깊게 공부하려고 했는데 너무 깊은 내용들 뿐이였습니다.\
재미있어 보였지만 당장 백엔드를 깊게 공부하는 것에 시간을 쓰고 싶지 않았습니다.\
딱 내가 필요한 만큼의 지식은 없을까 구글링하던 중 필요한 글을 읽었습니다.

>object는 참조될 수 있다.\
>다시 말해, 이곳저곳에서 공유될 수 있다.\
>그런데, 참조되고 있는 object의 상태가 바뀐다면?
>
> - 문제가 발생하는 경우: 그 object는 `Value object`
> - 문제 없고 오히려 의도에 부합하는 경우: 그 object는 `Entity`
>
>object a를 다른 object들이 참조하고 있을 때,
>a의 상태를 변경하면 a를 참조하고 있는 모든 object들이 영향을 받는다.
>
>예를 들어, object a가 사람의 주소를 나타낸다고 해보자.\
>세 사람이 한 가족이라 a를 참조하게 했다.\
>그런데 한 사람이 이사가서 x의 값을 변경했다.\
>그랬더니 그대로 살고 있던 나머지 두 사람의 주소도 같이 바뀌어버렸다.
>
>이렇게 문제가 발생한다면 먼저 복사해야 한다.\
>object a를 복사해서 object a2와 a3를 만들어 각각 다른 가족들이 참조하도록 했어야 했다.\
>이런 식으로 다루게 되는 object를 `Value object`라고 한다.
>
>참고로, 위 object들은 생성 이후에 변하지 않기 때문에 불변이라고 표현한다.\
>(안전성을 위해 불변을 활용한 또 다른 예로는 Primitive wrapper class가 있다.)
>
>반면, object a가 모임 장소의 주소를 나타낸다고 해보자.\
>세 사람이 모이기로 해서 a를 참조하게 했다.\
>그런데 모임 장소가 바뀌어서 a의 값을 변경했다.\
>문제 없이 세 사람 모두의 모임 장소가 잘 변경되었다.\
>이렇게 공유되는 object를 `Entity`라고 한다

물론 따라오는 아래글에는 실무적으로 한계가 있다고 하지만 저의 수준에서는 충분하다고 생각했습니다.

## 참고

- [엔티티(Entity)와 값 객체(Value Object)의 차이](https://jaeyeolshin.github.io/2016-02-06/difference-between-entity-and-value-object/)
- [엔티티 vs 값 객체 (Entity vs Value object)](https://velog.io/@yullivan/Entity%EC%99%80-Value-object)
